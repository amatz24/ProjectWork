<div class="d-flex flex-wrap justify-content-around">
    <div *ngFor="let prodotto of prodotti" class="card book">
        <img class="card-img-top" [src]="'assets/'+prodotto.Immagine" alt="Card image cap">
        
        <div class="card-body">
            <h4 class="card-title">{{prodotto.Descrizione}}</h4>
            <h5 class="card-title">{{prodotto.Prezzo}}€</h5>
            <p class="card-text">{{prodotto.Categoria}}</p>
            <div class="right">

                <button type="button" class="btn btn-outline-warning" (click)="openModifica(prodotto)">Modifica</button>
                  <button class="btn btn-outline-primary" (click)="cartService.add(prodotto)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
                    <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
                  </svg></button>
            </div>
        </div>
    </div>
</div>

<!-- MODALE -->
<div class="overlay" *ngIf="selectedProduct">
    <div class="modale">
        <h3>Modifica ingredienti per {{ selectedProduct.Descrizione }}</h3>
        
        <div *ngFor="let ingrediente of selectedProduct.Ingredienti" class="ingrediente">
            <div class="ingredienti">
                <input type="checkbox" [(ngModel)]="ingrediente.checked" 
                   [disabled]="ingrediente.QuantitaMin > 0 && ingrediente.Quantita === ingrediente.QuantitaMin"
                   (change)="toggleIngrediente(ingrediente)">
            <label>{{ ingrediente.Descrizione }}</label>
            </div>
            
            <!-- Controlli per quantità -->
             <div>
                <button class="btn btn-secondary btn-sm meno" (click)="modificaQuantita(ingrediente, -1)" 
                    [disabled]="ingrediente.Quantita <= ingrediente.QuantitaMin">-</button>
            <span style="margin: 0 200px;">{{ ingrediente.Quantita }}</span>
            <button class="btn btn-secondary btn-sm" (click)="modificaQuantita(ingrediente, 1)" 
                    [disabled]="ingrediente.Quantita >= ingrediente.QuantitaMax">+</button>
             </div>
            
        </div>

        <div class="buttons">
            <button class="btn btn-danger" (click)="closeModifica()">Chiudi</button>
            <button class="btn btn-success" (click)="salvaModifiche()">Conferma</button>
        </div>
    </div>

    